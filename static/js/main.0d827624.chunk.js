(this["webpackJsonpanagrama-app"]=this["webpackJsonpanagrama-app"]||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=(a(42),a(70)),i=a(22),d=a(3),u=(a(43),a(11)),l=a.n(u),j=a(14),m=a(25),b=a(36),f=a.n(b),p=a(6),O=a(10),v=a(16),g=a(37),h=a.n(g);function w(e){var t=localStorage.getItem("saved:"+e);return t?JSON.parse(t):null}function x(e){var t=w(e.word.anagram);t?(t.game=e,t.updated=(new Date).toJSON(),localStorage.setItem("saved:"+e.word.anagram,JSON.stringify(t))):localStorage.setItem("saved:"+e.word.anagram,JSON.stringify({anagram:e.word.anagram,created:(new Date).toJSON(),updated:(new Date).toJSON(),game:e,solved:null===e.solutions.find((function(e){return!e.solved}))}))}var k=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(a().anagramaGame);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},N=Object(v.b)("anagramas/shuffleLetters",function(){var e=Object(j.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getState().anagramaGame.word.letters,e.abrupt("return",h.a.shuffle(n).map((function(e,t){return Object(O.a)(Object(O.a)({},e),{},{index:t})})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),S=Object(v.c)({name:"anagramaGame",initialState:{solutions:[],word:{anagram:"",currentWord:"",letters:[]}},reducers:{setAnagramaData:function(e,t){return t.payload},clearLetters:function(e){e.word.currentWord="",e.word.letters=e.word.letters.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{used:!1})}))},selectLetter:function(e,t){var a=t.payload,n=a.letter,r=a.index;if(void 0===r&&(r=e.word.letters.findIndex((function(e){return!e.used&&e.letter.toUpperCase()===n.toUpperCase()}))),r>=0){e.word.letters[r].used=!0,e.word.currentWord+=n.toUpperCase();var c=e.solutions.findIndex((function(t){return!t.solved&&t.normalizedSolution.toUpperCase()===e.word.currentWord.toUpperCase()}));c>=0&&(e.solutions[c].solved=!0,e.word.currentWord="",e.word.letters=e.word.letters.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{used:!1})})))}}},extraReducers:function(e){e.addCase(N.fulfilled,(function(e,t){var a=t.payload;e.word.letters=a}))}}),y=S.actions,C=y.setAnagramaData,W=y.clearLetters,J=y.selectLetter,L=function(e){return e.anagramaGame.word},U=function(e){return e.anagramaGame.solutions},D=S.reducer,G=a(12),I=a.n(G),z=a(2);function E(e){var t=e.solution,a=e.solved;return Object(z.jsx)("div",{className:I()(["col-3",{"font-weight-bold":a}]),children:a?t.toUpperCase():"?".repeat(t.length)})}function A(){var e=Object(p.c)(U);return Object(z.jsx)("div",{className:"row",style:{maxHeight:"50vh"},children:e.map((function(e){return Object(z.jsx)(E,Object(O.a)({},e),e.solution)}))})}var B=a(71);function H(e){var t=Object(p.b)(),a=e.letter,n=e.index,r=e.used;return Object(z.jsx)(B.a,{className:"mr-2 pd-0 btn-lg",style:{width:"2em",height:"2em",lineHeight:"2em",textAlign:"center",verticalAlign:"middle",padding:"0",fontSize:"2em"},disabled:r,onClick:function(){t(J({letter:a,index:n})),t(k())},children:a.toUpperCase()})}function M(){var e=Object(p.b)(),t=Object(p.c)(L),a=t.currentWord,n=t.letters;return Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"row",children:Object(z.jsxs)("div",{className:"col-12 text-center",children:[n.map((function(e){return Object(z.jsx)(H,Object(O.a)({},e),e.letter+e.index)})),Object(z.jsx)(B.a,{className:"btn-warning",onClick:function(){e(N()),e(k())},children:"Misturar"})]})}),Object(z.jsx)("div",{className:"row",children:Object(z.jsxs)("div",{className:"col-12 text-center h2",children:[a," ",Object(z.jsx)(B.a,{className:"btn-danger",onClick:function(){e(W()),e(k())},disabled:""===t.currentWord,children:"Limpar"})]})})]})}function F(){var e=Object(p.b)(),t=Object(n.useCallback)((function(t){if(1===t.key.length){var a=t.key.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase();e(J({letter:a}))}else"Backspace"===t.key&&e(W())}),[e]);return Object(n.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[t]),Object(z.jsxs)("div",{className:"mt-5",children:[Object(z.jsx)(M,{}),Object(z.jsx)(A,{})]})}function R(){var e=Object(p.b)(),t=Object(d.f)().anagrama,a=Object(n.useState)(!1),r=Object(m.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(null),i=Object(m.a)(s,2),u=i[0],b=i[1];return Object(n.useEffect)((function(){Object(j.a)(l.a.mark((function a(){var n,r,c,s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.split("").sort().join(""),!(r=w(n))){a.next=7;break}e(C(r.game)),o(!0),a.next=19;break;case 7:return a.prev=7,a.next=10,f.a.get("".concat("https://stealthc.github.io/anagramas","/dump/").concat(n,".json"));case 10:c=a.sent,s={word:{anagram:n,currentWord:"",letters:n.split("").map((function(e,t){return{letter:e,used:!1,index:t}}))},solutions:c.data.palavras.map((function(e,t){return{solution:e,normalizedSolution:c.data.palavras_normalized[t],solved:!1}}))},e(C(s)),o(!0),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(7),b("Os dados deste jogo n\xe3o puderam ser carregados.");case 19:case"end":return a.stop()}}),a,null,[[7,16]])})))()}),[t,e]),null!==u?Object(z.jsx)("div",{children:u}):c?Object(z.jsx)("div",{children:Object(z.jsx)(F,{})}):Object(z.jsxs)("div",{children:["Carregando: ",t]})}var $=function(){return Object(z.jsx)(i.a,{children:Object(z.jsx)(s.a,{children:Object(z.jsx)(d.c,{children:Object(z.jsx)(d.a,{path:"/game/:anagrama",children:Object(z.jsx)(R,{})})})})})},_=Object(v.a)({reducer:{anagramaGame:D}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(p.a,{store:_,children:Object(z.jsx)($,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.0d827624.chunk.js.map