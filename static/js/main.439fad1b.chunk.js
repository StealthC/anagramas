(this["webpackJsonpanagrama-app"]=this["webpackJsonpanagrama-app"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(17),o=n.n(c),s=(n(42),n(70)),i=n(22),d=n(3),u=(n(43),n(11)),l=n.n(u),j=n(14),m=n(25),f=n(36),b=n.n(f),p=n(6),O=n(10),v=n(16),g=n(37),h=n.n(g);function w(e){var t=localStorage.getItem("saved:"+e);return t?JSON.parse(t):null}function x(e){var t=w(e.word.anagram);t?(t.game=e,t.updated=(new Date).toJSON(),localStorage.setItem("saved:"+e.word.anagram,JSON.stringify(t))):localStorage.setItem("saved:"+e.word.anagram,JSON.stringify({anagram:e.word.anagram,created:(new Date).toJSON(),updated:(new Date).toJSON(),game:e,solved:null===e.solutions.find((function(e){return!e.solved}))}))}var k=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(n().anagramaGame);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},N=Object(v.b)("anagramas/shuffleLetters",function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState().anagramaGame.word.letters,e.abrupt("return",h.a.shuffle(r).map((function(e,t){return Object(O.a)(Object(O.a)({},e),{},{index:t})})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(v.c)({name:"anagramaGame",initialState:{solutions:[],word:{anagram:"",currentWord:"",letters:[]}},reducers:{setAnagramaData:function(e,t){return t.payload},clearLetters:function(e){e.word.currentWord="",e.word.letters=e.word.letters.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{used:!1})}))},selectLetter:function(e,t){var n=t.payload,r=n.letter,a=n.index;if(void 0===a&&(a=e.word.letters.findIndex((function(e){return!e.used&&e.letter.toUpperCase()===r.toUpperCase()}))),a>=0){e.word.letters[a].used=!0,e.word.currentWord+=r.toUpperCase();var c=e.solutions.findIndex((function(t){return!t.solved&&t.normalizedSolution.toUpperCase()===e.word.currentWord.toUpperCase()}));c>=0&&(e.solutions[c].solved=!0,e.word.currentWord="",e.word.letters=e.word.letters.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{used:!1})})))}}},extraReducers:function(e){e.addCase(N.fulfilled,(function(e,t){var n=t.payload;e.word.letters=n}))}}),y=S.actions,C=y.setAnagramaData,W=y.clearLetters,J=y.selectLetter,L=function(e){return e.anagramaGame.word},U=function(e){return e.anagramaGame.solutions},D=S.reducer,G=n(12),I=n.n(G),z=n(2);function E(e){var t=e.solution,n=e.solved;return Object(z.jsx)("div",{className:I()(["col-3",{"font-weight-bold":n}]),children:n?t.toUpperCase():"?".repeat(t.length)})}function A(){var e=Object(p.c)(U);return Object(z.jsx)("div",{className:"row",style:{maxHeight:"50vh"},children:e.map((function(e){return Object(z.jsx)(E,Object(O.a)({},e),e.solution)}))})}var B=n(71);function H(e){var t=Object(p.b)(),n=e.letter,r=e.index,a=e.used;return Object(z.jsx)(B.a,{className:"mr-2 pd-0 btn-lg",style:{width:"2em",height:"2em",lineHeight:"2em",textAlign:"center",verticalAlign:"middle",padding:"0",fontSize:"2em"},disabled:a,onClick:function(){t(J({letter:n,index:r})),t(k())},children:n.toUpperCase()})}function M(){var e=Object(p.b)(),t=Object(p.c)(L),n=t.currentWord,r=t.letters;return Object(z.jsxs)("div",{children:[Object(z.jsx)("div",{className:"row",children:Object(z.jsxs)("div",{className:"col-12 text-center",children:[r.map((function(e){return Object(z.jsx)(H,Object(O.a)({},e),e.letter+e.index)})),Object(z.jsx)(B.a,{className:"btn-warning",onClick:function(){e(N()),e(k())},children:"Misturar"})]})}),Object(z.jsx)("div",{className:"row",children:Object(z.jsxs)("div",{className:"col-12 text-center h2",children:[n," ",Object(z.jsx)(B.a,{className:"btn-danger",onClick:function(){e(W()),e(k())},disabled:""===t.currentWord,children:"Limpar"})]})})]})}function F(){var e=Object(p.b)(),t=Object(r.useCallback)((function(t){if(1===t.key.length){var n=t.key.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase();e(J({letter:n}))}else"Backspace"===t.key&&e(W())}),[e]);return Object(r.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[t]),Object(z.jsxs)("div",{className:"mt-5",children:[Object(z.jsx)(M,{}),Object(z.jsx)(A,{})]})}function R(){var e=Object(p.b)(),t=Object(d.f)().anagrama,n=Object(r.useState)(!1),a=Object(m.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(null),i=Object(m.a)(s,2),u=i[0],f=i[1];return Object(r.useEffect)((function(){Object(j.a)(l.a.mark((function n(){var r,a,c,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.split("").sort().join(""),!(a=w(r))){n.next=7;break}e(C(a.game)),o(!0),n.next=19;break;case 7:return n.prev=7,n.next=10,b.a.get("".concat("","/dump/").concat(r,".json"));case 10:c=n.sent,s={word:{anagram:r,currentWord:"",letters:r.split("").map((function(e,t){return{letter:e,used:!1,index:t}}))},solutions:c.data.palavras.map((function(e,t){return{solution:e,normalizedSolution:c.data.palavras_normalized[t],solved:!1}}))},e(C(s)),o(!0),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(7),f("Os dados deste jogo n\xe3o puderam ser carregados.");case 19:case"end":return n.stop()}}),n,null,[[7,16]])})))()}),[t,e]),null!==u?Object(z.jsx)("div",{children:u}):c?Object(z.jsx)("div",{children:Object(z.jsx)(F,{})}):Object(z.jsxs)("div",{children:["Carregando: ",t]})}var $=function(){return Object(z.jsx)(i.a,{children:Object(z.jsx)(s.a,{children:Object(z.jsx)(d.c,{children:Object(z.jsx)(d.a,{path:"/game/:anagrama",children:Object(z.jsx)(R,{})})})})})},_=Object(v.a)({reducer:{anagramaGame:D}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(p.a,{store:_,children:Object(z.jsx)($,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.439fad1b.chunk.js.map